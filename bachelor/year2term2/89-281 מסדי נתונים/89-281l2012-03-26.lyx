#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass heb-article
\begin_preamble
\date{}
\usepackage{cancel}
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language hebrew
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Itemize
שפת שאילתות -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
QL(Query Language)
\backslash
DML(Data Manipulation Language)
\end_layout

\begin_layout Itemize
אלגברה רלציונית -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
RA - Relational Algebra
\end_layout

\begin_layout Standard
אלגברה רלציונית היא שפת שאליתות.
 שפות כמו
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
SQL
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
\lang hebrew
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
מתורגמות לפקודות של אלגברה רלציונית - זה הבסיס.
\end_layout

\begin_layout Section*
הגדרה
\end_layout

\begin_layout Standard
\begin_inset Formula $\textnormal{RA}$
\end_inset

 מורכבת מ:
\end_layout

\begin_layout Itemize
קבוצת יחסים -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
set of relations
\end_layout

\begin_layout Itemize
פעולות -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
RA operators
\end_layout

\begin_layout Standard
את היחסים כבר הגדרנו.
 נשאר להגדיר פעולות.
\end_layout

\begin_layout Section*
פעולות של אלגברה רלציונית
\end_layout

\begin_layout Standard
את כל הפעולות של אלגברה רלציונית אפשר לסווג ל
\numeric on
4
\family roman
\series medium
\shape up
\size normal
\emph off
\numeric off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
קטגוריות:
\end_layout

\begin_layout Enumerate
פעולות על קבוצות -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
set operations
\end_layout

\begin_deeper
\begin_layout Itemize
איחוד 
\begin_inset Formula $"\cup"$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
union
\end_layout

\begin_layout Itemize
חיסור 
\begin_inset Formula $"-"$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
difference
\end_layout

\begin_layout Itemize
חיתוך 
\begin_inset Formula $"\cap"$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
intersection
\end_layout

\end_deeper
\begin_layout Enumerate
הסרת חלקים מיחס -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
remove parts
\end_layout

\begin_deeper
\begin_layout Itemize
היטל 
\begin_inset Formula $"\pi"$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
projection
\end_layout

\begin_layout Itemize
בחירה 
\begin_inset Formula $"\sigma"$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
selection
\end_layout

\end_deeper
\begin_layout Enumerate
צירופים -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
combinations
\end_layout

\begin_deeper
\begin_layout Itemize
מכפלה קרטזית 
\begin_inset Formula $"\times"$
\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Cartesian Product
\end_layout

\begin_layout Standard
שאר הצירופים הם לא פעולות בסיסיות:
\end_layout

\begin_layout Itemize
צירוף טבעי -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Natural Join
\end_layout

\begin_layout Itemize
צירוף תטא - 
\lang english

\begin_inset Formula $\Theta$
\end_inset

 Join
\end_layout

\begin_layout Itemize
צירוף חלקי -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Semi Join
\end_layout

\end_deeper
\begin_layout Enumerate
שינוי שם -
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
renaming
\end_layout

\begin_layout Section*

\numeric on
1
\numeric off
.
 פעולות על קבוצות
\end_layout

\begin_layout Subsection*
איחוד
\end_layout

\begin_layout Standard
חיתוך מבצעים בין שני יחסים מאותה סכימה - 
\begin_inset Formula $R1\left(S\right),R2\left(S\right)$
\end_inset

:
\begin_inset Formula 
\[
R=R1\cup R2
\]

\end_inset


\begin_inset Formula 
\[
t\in R\Leftrightarrow t\in R1\vee t\in R2
\]

\end_inset


\end_layout

\begin_layout Standard
דוגמה:
\begin_inset Formula 
\[
\begin{tabular}{ccc}
Deposit1\\
Mineral & Weight & Hard\\
\hline{}zircon & 190 & 7.5\\
topaz & 182 & 8
\end{tabular}\qquad\begin{tabular}{ccc}
Deposit2\\
Mineral & Weight & Hard\\
\hline{}coecit & 100 & 3\\
zircon & 190 & 7.5
\end{tabular}\qquad\begin{tabular}{ccc}
Deposit1\cap Deposit2\\
Mineral & Weigh & Hard\\
\hline{}zircon & 190 & 7.5\\
topaz & 182 & 8\\
coecit & 100 & 3
\end{tabular}
\]

\end_inset


\end_layout

\begin_layout Subsection*
חיסור
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R=R1-R2
\]

\end_inset


\begin_inset Formula 
\[
t\in R\Leftrightarrow t\in R1\wedge t\notin R2
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{tabular}{ccc}
Deposit1-Deposit2\\
Mineral & Weight & Hard\\
\hline{}topaz & 182 & 8
\end{tabular}\qquad\begin{tabular}{ccc}
Deposit2-Deposit1\\
Mineral & Weight & Hard\\
\hline{}coecit & 100 & 3
\end{tabular}
\]

\end_inset


\end_layout

\begin_layout Subsection*
חיתוך
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R1\cap R2=R1-\left(R1-R2\right)
\]

\end_inset


\end_layout

\begin_layout Section*

\numeric on
2
\numeric off
.
 הסרת חלקים מיחס
\end_layout

\begin_layout Subsection*
הטלה
\end_layout

\begin_layout Standard
אם 
\begin_inset Formula $R\left(S\right)$
\end_inset

 יחס, ו
\begin_inset Formula $S'\subseteq S$
\end_inset

, אז הטלה של 
\begin_inset Formula $R$
\end_inset

 על 
\begin_inset Formula $S'$
\end_inset

 היא 
\begin_inset Formula $R'=\pi_{S'}R$
\end_inset

 מוגדרת בתור בחירה של עמודות 
\begin_inset Formula $S'$
\end_inset

 מתוך 
\begin_inset Formula $R$
\end_inset

.
\end_layout

\begin_layout Standard
כלומר, 
\begin_inset Formula $t'\in R'$
\end_inset

 אם 
\begin_inset Formula 
\[
\exists t\in R
\]

\end_inset


\begin_inset Formula 
\[
t'=\textnormal{restriction}_{S'}\left(t\right)
\]

\end_inset

לדוגמה, אם יש לנו יחס 
\begin_inset Formula $\textnormal{Mineral}$
\end_inset

, אז ניתן לקחת 
\begin_inset Formula $\pi_{\textnormal{Mineral}}\textnormal{Deposit1}$
\end_inset

:
\begin_inset Formula 
\[
\begin{tabular}{c}
\pi_{\textnormal{Mineral}}Deposit1\\
Mineral\\
zircon\\
topaz\\
coecit
\end{tabular}
\]

\end_inset


\end_layout

\begin_layout Standard
יכול להיות שבהטלה יהיו פחות שורות מאשר ביחס המקורי.
 למשל:
\begin_inset Formula 
\[
\begin{tabular}{ccccc}
Minerals\\
Mineral & Weight & Hard & Streak & Color\\
\hline{}zircon & 190 & 7.5 & while & green\\
topaz & 182 & 8 & white & blue\\
coecit & 100 & 3 & white & white\\
zircon & 190 & 7.5 & white & brown\\
topaz & 182 & 8 & white & yellow
\end{tabular}
\]

\end_inset


\end_layout

\begin_layout Standard
אם נבחר הטלה שמורידה שורות כך שיש כפילויות, נקבל פחות שורות:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none

\begin_inset Formula 
\[
\begin{tabular}{cc}
 \pi_{\textnormal{Mineral,Streak}}Minerals\\
Mineral  &  Streak \\
\hline{}zircon  &  while \\
topaz  &  white \\
coecit  &  white 
\end{tabular}
\]

\end_inset


\end_layout

\begin_layout Standard
ב
\lang english
SQL
\lang hebrew
, כותבים את ההטלה בתור 
\begin_inset Formula $\pi\left\{ \begin{array}{c}
\textnormal{SELECT }A1,A2\\
\textnormal{FROM }R
\end{array}\right.$
\end_inset


\end_layout

\begin_layout Subsection*
בחירה
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R\left(S\right)
\]

\end_inset

אם 
\begin_inset Formula $c$
\end_inset

 הוא תנאי על שורה, אז
\begin_inset Formula 
\[
\sigma_{c}R
\]

\end_inset


\begin_inset Formula 
\[
t'\in\sigma_{c}R\Leftrightarrow t\in R\wedge c\left(t\right)=\textnormal{true}
\]

\end_inset


\end_layout

\begin_layout Standard
ב
\lang english
SQL
\lang hebrew
, 
\begin_inset Formula $\sigma\left\{ \begin{array}{c}
\textnormal{SELECT }*\\
\textnormal{FROM }R\\
\textnormal{WHERE }...
\end{array}\right.$
\end_inset


\end_layout

\begin_layout Standard
לדוגמה:
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none

\begin_inset Formula 
\[
\begin{tabular}{ccccc}
 \sigma_{\textnormal{Weight}>150\textnormal{ AND }\textnormal{Hard}<8}Minerals\\
Mineral  &  Weight  &  Hard  &  Streak  &  Color\\
\hline{}zircon  &  190  &  7.5  &  while  &  green\\
zircon  &  190  &  7.5  &  white  &  brown
\end{tabular}
\]

\end_inset


\end_layout

\begin_layout Section*

\numeric on
3
\numeric off
.
 צירופים
\end_layout

\begin_layout Subsection*
מכפלה קרטזית
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
R1\left(S1\right),R2\left(S2\right)
\]

\end_inset


\begin_inset Formula 
\[
R=R1\times R2\qquad R\left(S\right)
\]

\end_inset


\begin_inset Formula 
\[
S=S1,S2
\]

\end_inset

נסמן:
\begin_inset Formula 
\[
S1\cap S2=A\qquad S1\backslash S2=B\qquad S2\backslash S1=C
\]

\end_inset


\begin_inset Formula 
\[
S1=A_{1},A_{2},...A_{n},B_{1},...B_{m}
\]

\end_inset


\begin_inset Formula 
\[
S2=A_{1},A_{2},...A_{n},C_{1},...C_{k}
\]

\end_inset

ואז
\begin_inset Formula 
\[
S=A_{1}.R_{1},A_{2}.R_{2},...A_{n}.R_{1},B_{1},...B_{m},A_{1}.R_{2},...A_{n}.R_{2},C_{1},...C_{k}
\]

\end_inset

כלומר משרשרים את הסכימות 
\begin_inset Formula $S1,S2$
\end_inset

, ולעמודות המשותפות מוסיפים את שם היחס.
\begin_inset Formula 
\[
t\in R\Leftrightarrow t=t_{1}t_{2},t_{1}\in R_{1},t_{2}\in R_{2}
\]

\end_inset


\end_layout

\begin_layout Subsection*
דוגמה
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{tabular}{cc}
Branches\\
Branch & Addr\\
\hline{}Br1 & Addr1\\
Br2 & Addr2\\
Br3 & Addr3
\end{tabular}
\]

\end_inset

נבצע צירוף עם
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
\lang english
Deposit1
\lang hebrew
:
\begin_inset Formula 
\[
\begin{tabular}{ccccc}
Deposit1\times Branches\\
Mineral & Weight & Hard & Branch & Addr\\
\hline{}zircon & 190 & 7.5 & Br1 & Addr1\\
zircon & 190 & 7.5 & Br2 & Addr2\\
zircon & 190 & 7.5 & Br3 & Addr3\\
topaz & 182 & 8 & Br1 & Addr1\\
topaz & 182 & 8 & Br2 & Addr2\\
topaz & 182 & 8 & Br3 & Addr3
\end{tabular}
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
הערה - מספר השורות לאחר פעולות
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\left|R1\cup R2\right|\ge\begin{array}{c}
\left|R1\right|\\
\left|R2\right|
\end{array}
\]

\end_inset


\begin_inset Formula 
\[
\left|R1-R2\right|\le\left|R1\right|
\]

\end_inset


\begin_inset Formula 
\[
\left|R1\cap R2\right|\le\begin{array}{c}
\left|R1\right|\\
\left|R2\right|
\end{array}
\]

\end_inset


\begin_inset Formula 
\[
\left|\pi_{S'}R\right|\le\left|R\right|
\]

\end_inset


\begin_inset Formula 
\[
\left|\sigma_{c}R\right|\le\left|R\right|
\]

\end_inset

באף אחת מהפעולות האלה אנחנו לא יכולים להגיד כמה שורות בדיוק יהיו בתוצאה,
 אבל במכפלה קרטזית אנחנו כן יכולים:
\begin_inset Formula 
\[
\left|R1\times R2\right|=\left|R1\right|\cdot\left|R2\right|
\]

\end_inset


\end_layout

\begin_layout Subsection*
צירוף 
\begin_inset Formula $\Theta$
\end_inset


\end_layout

\begin_layout Standard
מסמנים 
\begin_inset Formula $\bowtie_{C}$
\end_inset

:
\begin_inset Formula 
\[
R=R1\bowtie_{C}R2
\]

\end_inset


\begin_inset Formula 
\[
R=\sigma_{C}\left(R1\times R2\right)
\]

\end_inset


\end_layout

\begin_layout Standard
דוגמה:
\begin_inset Formula 
\[
\begin{tabular}{cc}
Hgroup\\
Hard & Group\\
\hline{}3 & soft\\
7 & hard\\
8 & hard
\end{tabular}
\]

\end_inset


\begin_inset Formula 
\[
\begin{tabular}{ccccccc}
Minerals\bowtie_{\begin{array}{c}
Color=while\\
OR\\
Color=blue
\end{array}}Hgroup\\
Mineral & Weight & Hard.Minerals & Streak & Color & Hard.Hgroup & Group\\
\hline{}topaz & 182 & 8 & white & blue & 3 & soft\\
topaz & 182 & 8 & white & blue & 7 & hard\\
topaz & 182 & 8 & white & blue & 8 & hard\\
coecit & 100 & 3 & white & white & 3 & soft\\
coecit & 100 & 3 & white & white & 7 & hard\\
coecit & 100 & 3 & white & white & 8 & hard
\end{tabular}
\]

\end_inset


\end_layout

\end_body
\end_document
